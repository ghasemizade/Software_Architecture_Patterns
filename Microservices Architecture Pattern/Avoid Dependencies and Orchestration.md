# از وابستگی ها و ارکستراسیون اجتناب کنید

یکی از چالش های اصلی الگوی معماری میکروسرویس ها، تعیین سطح صحیح دانه بندی برای اجزای سرویس است. اگر اجزای سرویس خیلی درشت هستند، ممکن است متوجه مزایای این الگوی معماری (استقرار، مقیاس پذیری، آزمایش پذیری، و اتصال شل) نشوید. با این حال، اجزای خدماتی که خیلی ریزدانه هستند منجر به الزامات ارکستراسیون خدمات می‌شوند، که به سرعت معماری میکروسرویس‌های ناب شما را به یک معماری سرویس‌گرای سنگین تبدیل می‌کند، که با تمام پیچیدگی، سردرگمی، هزینه‌ها و کرکی که معمولاً در برنامه‌های مبتنی بر SOA یافت می‌شود، کامل می‌شود.&#x20;

اگر متوجه شدید که باید اجزای سرویس خود را از داخل رابط کاربری یا لایه API برنامه هماهنگ کنید، احتمالاً اجزای سرویس شما خیلی دقیق هستند. به طور مشابه، اگر متوجه شدید که برای پردازش یک درخواست واحد نیاز به برقراری ارتباط بین سرویس‌ها بین مؤلفه‌های سرویس دارید، این احتمال وجود دارد که مؤلفه‌های سرویس شما یا خیلی ریزدانه باشند یا از نظر عملکرد تجاری به درستی پارتیشن بندی نشده باشند.

ارتباط بین سرویس، که می تواند اتصالات نامطلوب بین اجزا را وادار کند، می تواند در عوض از طریق یک پایگاه داده مشترک مدیریت شود. برای مثال، اگر یک جزء خدماتی که سفارش‌های اینترنتی را تحویل می‌دهد به اطلاعات مشتری نیاز داشته باشد، می‌تواند به پایگاه داده برای بازیابی داده‌های لازم بر خلاف فراخوانی عملکرد در مؤلفه خدمات مشتری، به پایگاه داده مراجعه کند.

پایگاه داده مشترک می تواند نیازهای اطلاعاتی را برطرف کند، اما در مورد عملکرد مشترک چطور؟ اگر یک مؤلفه سرویس به عملکردی نیاز دارد که در یک مؤلفه سرویس دیگر یا مشترک برای همه مؤلفه‌های سرویس باشد، گاهی اوقات می‌توانید عملکرد مشترک را در مؤلفه‌های سرویس کپی کنید (در نتیجه اصل DRY را نقض کنید: خودتان را تکرار نکنید). این یک رویه نسبتاً رایج در اکثر برنامه‌های کاربردی تجاری است که الگوی معماری میکروسرویس‌ها را پیاده‌سازی می‌کنند، و به خاطر مستقل نگه داشتن مؤلفه‌های سرویس و جدا کردن استقرار آنها، از تکرار بخش‌های کوچک منطق کسب‌وکار جدا می‌شوند. کلاس های کاربردی کوچک ممکن است در این دسته از کدهای تکرارشده قرار گیرند.

اگر متوجه می‌شوید که صرف‌نظر از سطح دانه‌بندی مؤلفه‌های سرویس، هنوز نمی‌توانید از هماهنگ‌سازی مؤلفه‌های سرویس اجتناب کنید، نشانه خوبی است که ممکن است این الگوی معماری مناسب برای برنامه شما نباشد. به دلیل ماهیت توزیع شده این الگو، حفظ یک واحد تراکنشی کار در سراسر (و بین) اجزای خدمات بسیار دشوار است. چنین عملی به نوعی چارچوب جبران تراکنش برای بازگرداندن تراکنش ها نیاز دارد، که پیچیدگی قابل توجهی را به این الگوی معماری نسبتا ساده و ظریف می افزاید.
